<UserControl x:Class="PGI.Views.CRM.CRMDashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="Transparent">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="30">
            <!-- Section 1 : KPIs -->
            <TextBlock Text="Indicateurs ClÃ©s" FontSize="20" FontWeight="SemiBold" Foreground="#003049" Margin="0,0,0,20"/>
            
            <Grid Margin="0,0,0,30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- KPI 1: Total Clients Actifs -->
                <Border Grid.Column="0" Background="#EEF2FF" CornerRadius="10" Padding="20" Margin="0,0,12,0">
                    <StackPanel>
                        <TextBlock Text="ðŸ‘¤ Total Clients Actifs" FontSize="12" Foreground="#64748B" Margin="0,0,0,8"/>
                        <TextBlock Text="247" FontSize="24" FontWeight="Bold" Foreground="#003049"/>
                        <TextBlock Text="+12 ce mois" FontSize="10" Foreground="#10B981" Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
                
                <!-- KPI 2: Taux de FidÃ©lisation -->
                <Border Grid.Column="1" Background="#F0FDF4" CornerRadius="10" Padding="20" Margin="0,0,12,0">
                    <StackPanel>
                        <TextBlock Text="â­ Taux de FidÃ©lisation" FontSize="12" Foreground="#64748B" Margin="0,0,0,8"/>
                        <TextBlock Text="78.5 %" FontSize="24" FontWeight="Bold" Foreground="#10B981"/>
                        <TextBlock Text="Clients fidÃ¨les : 194" FontSize="10" Foreground="#64748B" Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
                
                <!-- KPI 3: Taux de Conversion -->
                <Border Grid.Column="2" Background="#FEF3C7" CornerRadius="10" Padding="20" Margin="0,0,12,0">
                    <StackPanel>
                        <TextBlock Text="ðŸ“ˆ Taux de Conversion" FontSize="12" Foreground="#64748B" Margin="0,0,0,8"/>
                        <TextBlock Text="42.3 %" FontSize="24" FontWeight="Bold" Foreground="#F59E0B"/>
                        <TextBlock Text="Prospect â†’ Actif" FontSize="10" Foreground="#64748B" Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
                
                <!-- KPI 4: Panier Moyen -->
                <Border Grid.Column="3" Background="#FEE2E2" CornerRadius="10" Padding="20">
                    <StackPanel>
                        <TextBlock Text="ðŸ’° Panier Moyen (Global)" FontSize="12" Foreground="#64748B" Margin="0,0,0,8"/>
                        <TextBlock Text="385 $" FontSize="24" FontWeight="Bold" Foreground="#DC2626"/>
                        <TextBlock Text="Par transaction" FontSize="10" Foreground="#64748B" Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>
            
            <!-- Section 2 : Alertes et Actions Rapides -->
            <TextBlock Text="Alertes et Actions Rapides" FontSize="20" FontWeight="SemiBold" Foreground="#003049" Margin="0,20,0,20"/>
            
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Alertes de Satisfaction Client -->
                <Border Grid.Column="0" Background="White" CornerRadius="10" Padding="20" Margin="0,0,15,0" BorderBrush="#FCA5A5" BorderThickness="2">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                            <TextBlock Text="âš ï¸ Alertes de Satisfaction Client" 
                                     FontSize="16" 
                                     FontWeight="SemiBold" 
                                     Foreground="#DC2626"
                                     VerticalAlignment="Center"/>
                            <Border Background="#DC2626" CornerRadius="12" Padding="8,3" Margin="15,0,0,0">
                                <TextBlock Text="3 clients" FontSize="11" FontWeight="SemiBold" Foreground="White"/>
                            </Border>
                        </StackPanel>
                        
                        <TextBlock Text="Clients ayant laissÃ© une note â‰¤ 2 rÃ©cemment" FontSize="12" Foreground="#64748B" Margin="0,0,0,15"/>
                        
                        <!-- Tableau des clients insatisfaits -->
                        <DataGrid AutoGenerateColumns="False" 
                                RowHeight="40"
                                HeadersVisibility="Column"
                                GridLinesVisibility="None"
                                Background="Transparent"
                                BorderThickness="0"
                                CanUserAddRows="False"
                                CanUserDeleteRows="False"
                                IsReadOnly="True"
                                SelectionMode="Single"
                                FontSize="13"
                                Margin="0,0,0,15">
                            <DataGrid.ColumnHeaderStyle>
                                <Style TargetType="DataGridColumnHeader">
                                    <Setter Property="Background" Value="#FEF2F2"/>
                                    <Setter Property="Foreground" Value="#991B1B"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Padding" Value="10,8"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                </Style>
                            </DataGrid.ColumnHeaderStyle>
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Client" Binding="{Binding Client}" Width="*"/>
                                <DataGridTextColumn Header="Note" Binding="{Binding Note}" Width="60"/>
                                <DataGridTextColumn Header="Date" Binding="{Binding Date}" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>
                
                <!-- Raccourcis -->
                <Border Grid.Column="1" Background="White" CornerRadius="10" Padding="20">
                    <StackPanel>
                        <TextBlock Text="ðŸš€ Raccourcis" FontSize="16" FontWeight="SemiBold" Foreground="#003049" Margin="0,0,0,15"/>
                        
                        <Button Content="âž• Ajouter un client" 
                                Background="#10B981" 
                                Foreground="White"
                                BorderThickness="0"
                                Padding="15,12"
                                FontSize="13"
                                FontWeight="Medium"
                                Cursor="Hand"
                                Margin="0,0,0,10"
                                Click="BtnAddClient_Click">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" 
                                                        CornerRadius="8"
                                                        Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                    VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#059669"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        
                        <Button Content="ðŸ“¢ DÃ©marrer une campagne" 
                                Background="#669BBC" 
                                Foreground="White"
                                BorderThickness="0"
                                Padding="15,12"
                                FontSize="13"
                                FontWeight="Medium"
                                Cursor="Hand"
                                Click="BtnNewCampaign_Click">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" 
                                                        CornerRadius="8"
                                                        Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                    VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#003049"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                </Border>
            </Grid>
            
            <!-- Section 3 : ActivitÃ© RÃ©cente -->
            <TextBlock Text="ActivitÃ© RÃ©cente" FontSize="20" FontWeight="SemiBold" Foreground="#003049" Margin="0,30,0,20"/>
            
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- DerniÃ¨res Interactions -->
                <Border Grid.Column="0" Background="White" CornerRadius="10" Padding="20" Margin="0,0,15,0">
                    <StackPanel>
                        <TextBlock Text="ðŸ’¬ DerniÃ¨res Interactions EnregistrÃ©es" FontSize="16" FontWeight="SemiBold" Foreground="#003049" Margin="0,0,0,15"/>
                        
                        <DataGrid AutoGenerateColumns="False" 
                                RowHeight="40"
                                HeadersVisibility="Column"
                                GridLinesVisibility="Horizontal"
                                Background="Transparent"
                                BorderThickness="0"
                                CanUserAddRows="False"
                                CanUserDeleteRows="False"
                                IsReadOnly="True"
                                FontSize="13">
                            <DataGrid.ColumnHeaderStyle>
                                <Style TargetType="DataGridColumnHeader">
                                    <Setter Property="Background" Value="#F8FAFC"/>
                                    <Setter Property="Foreground" Value="#64748B"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Padding" Value="10,8"/>
                                </Style>
                            </DataGrid.ColumnHeaderStyle>
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Client" Binding="{Binding Client}" Width="*"/>
                                <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="100"/>
                                <DataGridTextColumn Header="EmployÃ©" Binding="{Binding Employe}" Width="120"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>
                
                <!-- Nouveaux Clients (Prospects) -->
                <Border Grid.Column="1" Background="White" CornerRadius="10" Padding="20">
                    <StackPanel>
                        <TextBlock Text="ðŸ†• Nouveaux Clients (Prospects)" FontSize="16" FontWeight="SemiBold" Foreground="#003049" Margin="0,0,0,15"/>
                        
                        <DataGrid AutoGenerateColumns="False" 
                                RowHeight="40"
                                HeadersVisibility="Column"
                                GridLinesVisibility="Horizontal"
                                Background="Transparent"
                                BorderThickness="0"
                                CanUserAddRows="False"
                                CanUserDeleteRows="False"
                                IsReadOnly="True"
                                FontSize="13">
                            <DataGrid.ColumnHeaderStyle>
                                <Style TargetType="DataGridColumnHeader">
                                    <Setter Property="Background" Value="#F8FAFC"/>
                                    <Setter Property="Foreground" Value="#64748B"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Padding" Value="10,8"/>
                                </Style>
                            </DataGrid.ColumnHeaderStyle>
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Nom" Binding="{Binding Nom}" Width="*"/>
                                <DataGridTextColumn Header="Date" Binding="{Binding Date}" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>
            </Grid>
        </StackPanel>
    </ScrollViewer>
</UserControl>

